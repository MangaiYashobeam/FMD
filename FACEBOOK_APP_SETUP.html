<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook App Setup - Dealers Face</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 2px solid #1877F2;
            margin-bottom: 40px;
        }
        
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #1877F2, #42b883);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #888;
            font-size: 1.1rem;
        }
        
        .step-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .step-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .step-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #1877F2, #0d5fc7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }
        
        .step-title {
            font-size: 1.5rem;
            color: #fff;
        }
        
        .step-content {
            padding-left: 65px;
        }
        
        .step-content p {
            margin-bottom: 15px;
            line-height: 1.7;
        }
        
        .step-content ol, .step-content ul {
            margin-left: 20px;
            margin-bottom: 20px;
        }
        
        .step-content li {
            margin-bottom: 12px;
            line-height: 1.6;
        }
        
        .highlight-box {
            background: rgba(24, 119, 242, 0.15);
            border-left: 4px solid #1877F2;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }
        
        .warning-box {
            background: rgba(255, 193, 7, 0.15);
            border-left: 4px solid #ffc107;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }
        
        .success-box {
            background: rgba(40, 167, 69, 0.15);
            border-left: 4px solid #28a745;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            margin: 20px 0;
        }
        
        code {
            background: rgba(0, 0, 0, 0.4);
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            color: #42b883;
        }
        
        pre {
            background: #0d1117;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid #30363d;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: #e6edf3;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #1877F2, #0d5fc7);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 5px 10px 0;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(24, 119, 242, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #28a745, #1e7e34);
        }
        
        .screenshot-placeholder {
            background: linear-gradient(135deg, #2d2d44, #1a1a2e);
            border: 2px dashed #444;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            color: #888;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        th {
            background: rgba(24, 119, 242, 0.2);
            color: #fff;
        }
        
        tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        
        .checklist {
            list-style: none;
            margin-left: 0;
        }
        
        .checklist li {
            padding: 10px 0;
            padding-left: 35px;
            position: relative;
        }
        
        .checklist li::before {
            content: "‚òê";
            position: absolute;
            left: 0;
            font-size: 1.2rem;
        }
        
        .env-var {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .env-name {
            font-weight: bold;
            color: #42b883;
            min-width: 200px;
        }
        
        .env-value {
            color: #ffc107;
            flex: 1;
        }
        
        .copy-btn {
            background: #333;
            border: none;
            color: #fff;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .copy-btn:hover {
            background: #444;
        }
        
        .progress-tracker {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
        }
        
        .progress-step {
            text-align: center;
            flex: 1;
        }
        
        .progress-dot {
            width: 30px;
            height: 30px;
            background: #333;
            border-radius: 50%;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        .progress-dot.active {
            background: #1877F2;
        }
        
        .progress-label {
            font-size: 0.8rem;
            color: #888;
        }
        
        footer {
            text-align: center;
            padding: 40px 0;
            margin-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöó Facebook App Setup Guide</h1>
            <p class="subtitle">Connect Dealers Face to Facebook Marketplace</p>
        </header>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-step">
                <div class="progress-dot active">1</div>
                <div class="progress-label">Create App</div>
            </div>
            <div class="progress-step">
                <div class="progress-dot">2</div>
                <div class="progress-label">Configure</div>
            </div>
            <div class="progress-step">
                <div class="progress-dot">3</div>
                <div class="progress-label">Permissions</div>
            </div>
            <div class="progress-step">
                <div class="progress-dot">4</div>
                <div class="progress-label">Get Keys</div>
            </div>
            <div class="progress-step">
                <div class="progress-dot">5</div>
                <div class="progress-label">Add to Railway</div>
            </div>
            <div class="progress-step">
                <div class="progress-dot">6</div>
                <div class="progress-label">Test</div>
            </div>
        </div>

        <!-- Prerequisites -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">üìã</div>
                <h2 class="step-title">Prerequisites Checklist</h2>
            </div>
            <div class="step-content">
                <ul class="checklist">
                    <li>Facebook account (personal or business)</li>
                    <li>Dealers Face deployed on Railway (you have this!)</li>
                    <li>Your Railway production URL: <code>https://fmd-production.up.railway.app</code></li>
                    <li>10-15 minutes of time</li>
                </ul>
            </div>
        </div>

        <!-- Step 1: Create Facebook App -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">1</div>
                <h2 class="step-title">Create a Facebook App</h2>
            </div>
            <div class="step-content">
                <p>First, let's create your Facebook Developer App:</p>
                
                <a href="https://developers.facebook.com/apps" target="_blank" class="btn">
                    üîó Open Facebook Developers
                </a>
                
                <ol>
                    <li>Click the <strong>Log In</strong> button (top right) if not logged in</li>
                    <li>Click <strong>My Apps</strong> in the top navigation</li>
                    <li>Click <strong>Create App</strong> button (green button)</li>
                    <li>
                        <strong>Select App Type:</strong>
                        <div class="highlight-box">
                            Choose <strong>"Other"</strong> ‚Üí then <strong>"Business"</strong>
                            <br><br>
                            ‚ö†Ô∏è Don't select "Consumer" - it has limited API access
                        </div>
                    </li>
                    <li>
                        <strong>Fill in App Details:</strong>
                        <table>
                            <tr>
                                <td><strong>App Name</strong></td>
                                <td><code>Dealers Face</code> (or your dealership name)</td>
                            </tr>
                            <tr>
                                <td><strong>App Contact Email</strong></td>
                                <td>Your business email address</td>
                            </tr>
                            <tr>
                                <td><strong>Business Account</strong></td>
                                <td>Select existing or "I don't want to connect"</td>
                            </tr>
                        </table>
                    </li>
                    <li>Click <strong>Create App</strong></li>
                    <li>Complete the security check if prompted</li>
                </ol>
                
                <div class="success-box">
                    ‚úÖ <strong>Success!</strong> You should now see your App Dashboard
                </div>
            </div>
        </div>

        <!-- Step 2: Add Facebook Login Product -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">2</div>
                <h2 class="step-title">Add Facebook Login Product</h2>
            </div>
            <div class="step-content">
                <p>Now we need to add the Facebook Login capability:</p>
                
                <ol>
                    <li>In your App Dashboard, scroll down to <strong>"Add products to your app"</strong></li>
                    <li>Find <strong>"Facebook Login"</strong> and click <strong>Set Up</strong></li>
                    <li>Select <strong>Web</strong> as the platform</li>
                    <li>
                        <strong>Enter your Site URL:</strong>
                        <pre><code>https://fmd-production.up.railway.app</code></pre>
                    </li>
                    <li>Click <strong>Save</strong> ‚Üí <strong>Continue</strong></li>
                </ol>

                <h3 style="margin-top: 30px; color: #fff;">Configure OAuth Settings</h3>
                <ol>
                    <li>In the left sidebar, click <strong>Facebook Login</strong> ‚Üí <strong>Settings</strong></li>
                    <li>
                        <strong>Configure these settings:</strong>
                        <table>
                            <tr>
                                <th>Setting</th>
                                <th>Value</th>
                            </tr>
                            <tr>
                                <td>Client OAuth Login</td>
                                <td><strong style="color: #28a745;">YES</strong></td>
                            </tr>
                            <tr>
                                <td>Web OAuth Login</td>
                                <td><strong style="color: #28a745;">YES</strong></td>
                            </tr>
                            <tr>
                                <td>Enforce HTTPS</td>
                                <td><strong style="color: #28a745;">YES</strong></td>
                            </tr>
                            <tr>
                                <td>Embedded Browser OAuth Login</td>
                                <td><strong style="color: #28a745;">YES</strong></td>
                            </tr>
                        </table>
                    </li>
                    <li>
                        <strong>Valid OAuth Redirect URIs</strong> (add both):
                        <pre><code>https://fmd-production.up.railway.app/api/facebook/callback
https://fmd-production.up.railway.app/api/auth/facebook/callback</code></pre>
                    </li>
                    <li>Click <strong>Save Changes</strong></li>
                </ol>
                
                <div class="warning-box">
                    ‚ö†Ô∏è <strong>Important:</strong> The redirect URIs must match EXACTLY - no trailing slashes!
                </div>
            </div>
        </div>

        <!-- Step 3: Request Permissions -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">3</div>
                <h2 class="step-title">Configure Permissions</h2>
            </div>
            <div class="step-content">
                <p>Request the permissions needed for Marketplace posting:</p>
                
                <ol>
                    <li>In the left sidebar, click <strong>App Review</strong> ‚Üí <strong>Permissions and Features</strong></li>
                    <li>Search for and request these permissions:</li>
                </ol>

                <h3 style="margin: 20px 0; color: #28a745;">‚úÖ Standard Permissions (No Review Needed)</h3>
                <table>
                    <tr>
                        <th>Permission</th>
                        <th>Description</th>
                        <th>Action</th>
                    </tr>
                    <tr>
                        <td><code>public_profile</code></td>
                        <td>Basic profile info</td>
                        <td>Included by default</td>
                    </tr>
                    <tr>
                        <td><code>email</code></td>
                        <td>User's email address</td>
                        <td>Click "Get Advanced Access"</td>
                    </tr>
                </table>

                <h3 style="margin: 20px 0; color: #ffc107;">‚è≥ Advanced Permissions (Review Required)</h3>
                <table>
                    <tr>
                        <th>Permission</th>
                        <th>Description</th>
                        <th>Needed For</th>
                    </tr>
                    <tr>
                        <td><code>pages_show_list</code></td>
                        <td>List user's pages</td>
                        <td>Showing connected pages</td>
                    </tr>
                    <tr>
                        <td><code>pages_read_engagement</code></td>
                        <td>Read page engagement</td>
                        <td>Analytics & insights</td>
                    </tr>
                    <tr>
                        <td><code>pages_manage_posts</code></td>
                        <td>Post to pages</td>
                        <td>Creating Marketplace posts</td>
                    </tr>
                </table>

                <div class="highlight-box">
                    üí° <strong>Development Mode:</strong> While your app is in development mode, you can test 
                    all permissions with your own account and any added test users. App Review is only 
                    needed before going live to the public.
                </div>
            </div>
        </div>

        <!-- Step 4: Get App Credentials -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">4</div>
                <h2 class="step-title">Get Your App Credentials</h2>
            </div>
            <div class="step-content">
                <p>Now let's get the App ID and App Secret:</p>
                
                <ol>
                    <li>In the left sidebar, click <strong>Settings</strong> ‚Üí <strong>Basic</strong></li>
                    <li>
                        <strong>Copy your App ID:</strong>
                        <div class="env-var">
                            <span class="env-name">App ID</span>
                            <span class="env-value">123456789012345</span>
                            <span style="color: #888;">(Your number will be different)</span>
                        </div>
                    </li>
                    <li>
                        <strong>Get your App Secret:</strong>
                        <ul>
                            <li>Click <strong>Show</strong> next to App Secret</li>
                            <li>Enter your Facebook password</li>
                            <li>Copy the revealed secret</li>
                        </ul>
                        <div class="env-var">
                            <span class="env-name">App Secret</span>
                            <span class="env-value">abc123def456ghi789jkl012mno345</span>
                            <span style="color: #888;">(Keep this SECRET!)</span>
                        </div>
                    </li>
                </ol>

                <div class="warning-box">
                    üîí <strong>Security Warning:</strong> Never share your App Secret publicly! 
                    Don't commit it to Git or share in chat.
                </div>
            </div>
        </div>

        <!-- Step 5: Add to Railway -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">5</div>
                <h2 class="step-title">Add Credentials to Railway</h2>
            </div>
            <div class="step-content">
                <p>Add your Facebook credentials to Railway environment variables:</p>
                
                <a href="https://railway.app/dashboard" target="_blank" class="btn">
                    üöÇ Open Railway Dashboard
                </a>

                <ol>
                    <li>Go to your <strong>fmd</strong> project</li>
                    <li>Click on your <strong>server</strong> service</li>
                    <li>Click the <strong>Variables</strong> tab</li>
                    <li>
                        <strong>Add these environment variables:</strong>
                        <pre><code># Facebook OAuth Configuration
FACEBOOK_APP_ID=your-app-id-here
FACEBOOK_APP_SECRET=your-app-secret-here</code></pre>
                    </li>
                    <li>Click <strong>Add</strong> for each variable</li>
                    <li>Railway will automatically redeploy</li>
                </ol>

                <div class="highlight-box">
                    <strong>Your URLs (already set in Railway):</strong>
                    <pre><code>API_URL=https://fmd-production.up.railway.app
FRONTEND_URL=https://fmd-production.up.railway.app</code></pre>
                </div>

                <h3 style="margin-top: 30px; color: #fff;">Complete Environment Variables</h3>
                <p>Make sure these are all set in Railway:</p>
                <table>
                    <tr>
                        <th>Variable</th>
                        <th>Value</th>
                        <th>Status</th>
                    </tr>
                    <tr>
                        <td><code>FACEBOOK_APP_ID</code></td>
                        <td>From Step 4</td>
                        <td>‚è≥ Add this</td>
                    </tr>
                    <tr>
                        <td><code>FACEBOOK_APP_SECRET</code></td>
                        <td>From Step 4</td>
                        <td>‚è≥ Add this</td>
                    </tr>
                    <tr>
                        <td><code>API_URL</code></td>
                        <td>https://fmd-production.up.railway.app</td>
                        <td>‚úÖ Should exist</td>
                    </tr>
                    <tr>
                        <td><code>FRONTEND_URL</code></td>
                        <td>https://fmd-production.up.railway.app</td>
                        <td>‚úÖ Should exist</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Step 6: Test the Integration -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">6</div>
                <h2 class="step-title">Test Your Integration</h2>
            </div>
            <div class="step-content">
                <p>Let's verify everything works:</p>
                
                <a href="https://fmd-production.up.railway.app/facebook" target="_blank" class="btn btn-secondary">
                    üß™ Test Facebook Connection
                </a>

                <ol>
                    <li>Wait for Railway to finish redeploying (1-2 minutes)</li>
                    <li>Go to your Dealers Face dashboard</li>
                    <li>Navigate to <strong>Facebook</strong> in the sidebar</li>
                    <li>Click <strong>Connect Facebook</strong></li>
                    <li>Authorize the app with your Facebook account</li>
                    <li>You should be redirected back with a success message</li>
                </ol>

                <div class="success-box">
                    ‚úÖ <strong>Expected Result:</strong> You'll see "Connected as [Your Name]" on the Facebook page
                </div>

                <h3 style="margin-top: 30px; color: #fff;">Troubleshooting</h3>
                <table>
                    <tr>
                        <th>Error</th>
                        <th>Solution</th>
                    </tr>
                    <tr>
                        <td>"App not configured"</td>
                        <td>Check FACEBOOK_APP_ID is set in Railway</td>
                    </tr>
                    <tr>
                        <td>"Invalid redirect URI"</td>
                        <td>Verify OAuth redirect URIs match exactly (no trailing slash)</td>
                    </tr>
                    <tr>
                        <td>"Access denied"</td>
                        <td>Make sure your Facebook app is in Development mode and you're a test user</td>
                    </tr>
                    <tr>
                        <td>Blank page after auth</td>
                        <td>Check FRONTEND_URL is set correctly in Railway</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Development Mode Note -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">üí°</div>
                <h2 class="step-title">Development Mode vs Live Mode</h2>
            </div>
            <div class="step-content">
                <h3 style="color: #28a745;">Development Mode (Current)</h3>
                <ul>
                    <li>Only app admins and test users can log in</li>
                    <li>All permissions available for testing</li>
                    <li>No app review required</li>
                    <li>Perfect for your dealership (small team)</li>
                </ul>

                <h3 style="margin-top: 20px; color: #1877F2;">Add Test Users (if needed)</h3>
                <ol>
                    <li>Go to <strong>App Roles</strong> ‚Üí <strong>Roles</strong></li>
                    <li>Click <strong>Add People</strong></li>
                    <li>Enter Facebook username/email</li>
                    <li>Assign role: <strong>Tester</strong></li>
                    <li>They need to accept the invitation</li>
                </ol>

                <h3 style="margin-top: 20px; color: #ffc107;">Going Live (Optional - For Public Use)</h3>
                <p>Only needed if you want other dealerships to use your app:</p>
                <ol>
                    <li>Complete App Review for each advanced permission</li>
                    <li>Provide Privacy Policy URL</li>
                    <li>Add Data Deletion callback</li>
                    <li>Submit for Facebook review (takes 1-5 days)</li>
                </ol>
            </div>
        </div>

        <!-- Quick Reference -->
        <div class="step-card">
            <div class="step-header">
                <div class="step-number">üìë</div>
                <h2 class="step-title">Quick Reference</h2>
            </div>
            <div class="step-content">
                <h3 style="color: #fff;">Important URLs</h3>
                <table>
                    <tr>
                        <td><strong>Facebook Developers</strong></td>
                        <td><a href="https://developers.facebook.com/apps" target="_blank" style="color: #1877F2;">developers.facebook.com/apps</a></td>
                    </tr>
                    <tr>
                        <td><strong>Railway Dashboard</strong></td>
                        <td><a href="https://railway.app/dashboard" target="_blank" style="color: #1877F2;">railway.app/dashboard</a></td>
                    </tr>
                    <tr>
                        <td><strong>Your App URL</strong></td>
                        <td><a href="https://fmd-production.up.railway.app" target="_blank" style="color: #1877F2;">fmd-production.up.railway.app</a></td>
                    </tr>
                    <tr>
                        <td><strong>Facebook Page</strong></td>
                        <td><a href="https://fmd-production.up.railway.app/facebook" target="_blank" style="color: #1877F2;">fmd-production.up.railway.app/facebook</a></td>
                    </tr>
                </table>

                <h3 style="margin-top: 30px; color: #fff;">Required OAuth Redirect URIs</h3>
                <pre><code>https://fmd-production.up.railway.app/api/facebook/callback
https://fmd-production.up.railway.app/api/auth/facebook/callback</code></pre>

                <h3 style="margin-top: 30px; color: #fff;">Requested Permissions</h3>
                <pre><code>public_profile
email
pages_show_list
pages_read_engagement
pages_manage_posts</code></pre>
            </div>
        </div>

        <footer>
            <p>Dealers Face - Facebook Integration Setup Guide</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                Need help? Check the 
                <a href="https://developers.facebook.com/docs/facebook-login/web" target="_blank" style="color: #1877F2;">
                    Facebook Login Documentation
                </a>
            </p>
        </footer>
    </div>

    <script>
        // Copy to clipboard functionality
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('Copied to clipboard!');
            });
        }
    </script>
</body>
</html>
